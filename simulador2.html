<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tinylol Java - Sonic Style (Mejorado)</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #222;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
        }
        #juegoCanvas {
            border: 2px solid white;
            display: block;
        }
        #controles-personalizacion {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 20px;
            background-color: #333;
            border-radius: 8px;
            border: 1px solid #555;
            width: 300px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .control-grupo {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .control-grupo label, .control-grupo input[type="number"] {
            font-size: 0.95em;
        }
        input[type="color"], select, input[type="number"] {
            width: 100px;
            height: 30px;
            padding: 0 5px;
            border: 1px solid #666;
            cursor: pointer;
            border-radius: 3px;
        }
        button {
            padding: 8px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #0056b3;
        }
        /* Estilos espec칤ficos para el editor de nivel */
        #editor-buttons {
            display: flex;
            justify-content: space-around;
        }
        .editor-activo {
            border: 2px solid yellow !important;
        }
    </style>
</head>
<body>

    <h1 id="titulo-juego">Tinylol Java - Sonic Style (Wrap-Around)</h1>

    <div id="controles-personalizacion" style="display: none;">
        <h2>Personalizaci칩n y Editor</h2>

        <div class="control-grupo">
            <label for="maxVelocidad">M치x. Velocidad Base</label>
            <input type="number" id="maxVelocidad" value="5" min="1" max="20">
        </div>
         <div class="control-grupo">
            <label for="aceleracion">Aceleraci칩n Base</label>
            <input type="number" id="aceleracion" value="0.15" min="0.05" max="1" step="0.05">
        </div>
        <div class="control-grupo">
            <label for="friccion">Fricci칩n (Momentum)</label>
            <input type="number" id="friccion" value="0.97" min="0.8" max="0.999" step="0.01">
        </div>

        <div class="control-grupo">
            <label for="colorJugador">Color (Fallback)</label>
            <input type="color" id="colorJugador" value="#00FF00">
        </div>
        <div class="control-grupo">
            <label for="colorFondo">Fondo</label>
            <input type="color" id="colorFondo" value="#444444">
        </div>
        
        <div class="control-grupo">
            <label for="selectorNivel">Nivel Actual</label>
            <select id="selectorNivel"></select>
        </div>


        <h3>Editor de Nivel (Click en el Canvas)</h3>
        <div id="editor-buttons">
            <button id="btn-add-platform">A침adir Plataforma</button>
            <button id="btn-remove-platform">Borrar Plataforma</button>
        </div>
        
        <button id="btnVolver">Volver al Juego / Men칰</button>
    </div>

    <canvas id="juegoCanvas" width="800" height="400"></canvas>
    
    <script>
        // ----------------------------------------------------
        // 1. INICIALIZACI칍N, ESTADO Y OBJETOS
        // ----------------------------------------------------
        const canvas = document.getElementById('juegoCanvas');
        const ctx = canvas.getContext('2d');
        const ANCHO = canvas.width;
        const ALTO = canvas.height;
        
        // Elementos del DOM
        const controlesDiv = document.getElementById('controles-personalizacion');
        const btnVolver = document.getElementById('btnVolver');
        const inputColorFondo = document.getElementById('colorFondo');
        const inputColorJugador = document.getElementById('colorJugador');
        const inputMaxVelocidad = document.getElementById('maxVelocidad');
        const inputAceleracion = document.getElementById('aceleracion');
        const inputFriccion = document.getElementById('friccion'); 
        const btnAddPlatform = document.getElementById('btn-add-platform');
        const btnRemovePlatform = document.getElementById('btn-remove-platform');
        const selectorNivel = document.getElementById('selectorNivel');

        // Sprite y Animaci칩n (Asumimos que 'player.png' existe con frames de 32x32)
        const playerSprite = new Image();
        playerSprite.src = 'player.png'; 
        let spriteLoaded = false;
        playerSprite.onload = () => { spriteLoaded = true; };
        
        const FRAME_WIDTH = 32; 
        const FRAME_HEIGHT = 32; 
        const TILE_SIZE = 30; 

        let currentFrame = 0;
        let frameDelay = 0;
        const FRAMES_PER_ANIMATION = 4; // Frames de carrera (0, 1, 2, 3)
        const FRAME_SALTO = 4; // Frame de salto

        // Control de estado
        let estadoJuego = 'INICIO'; 
        let modoEditor = null; 

        // Variables de personalizaci칩n
        let colorFondo = inputColorFondo.value;
        let colorJugador = inputColorJugador.value; 
        
        // Variables de f칤sica y control
        let BASE_MAX_SPEED = parseFloat(inputMaxVelocidad.value);
        let BASE_ACCELERATION = parseFloat(inputAceleracion.value);
        let FRICTION = parseFloat(inputFriccion.value); 
        const AIR_DRAG = 0.99; 
        const TURBO_FACTOR = 2.0;
        const GRAVEDAD = 0.6;
        const VELOCIDAD_SALTO = -12;

        let puntuacion = 0; 
        
        // Objeto Jugador
        let jugador = {
            x: 50,
            y: ALTO - TILE_SIZE, 
            ancho: TILE_SIZE,
            alto: TILE_SIZE,
            dx: 0, 
            dy: 0,
            enElSuelo: false,
            mirandoDerecha: true,
            turboActivo: false
        };
        
        // Estructura de Niveles (Incluye enemigos y anillos)
        const niveles = [
            // Nivel 0: Tutorial de Movimiento
            {
                nombre: "Green Hill Lite",
                plataformas: [
                    { x: 0, y: ALTO - 20, ancho: ANCHO, alto: 20 }, // Suelo fijo
                    { x: 100, y: ALTO - 80, ancho: 150, alto: 10 },
                    { x: 350, y: ALTO - 150, ancho: 100, alto: 10 },
                    { x: 500, y: ALTO - 250, ancho: 200, alto: 10 }
                ],
                anillos: [
                    { x: 150, y: ALTO - 100, tama침o: 8, recogido: false },
                    { x: 390, y: ALTO - 170, tama침o: 8, recogido: false }
                ],
                enemigos: []
            },
            // Nivel 1: Con Enemigo Simple
            {
                nombre: "Badnik Patrol",
                plataformas: [
                    { x: 0, y: ALTO - 20, ancho: ANCHO, alto: 20 },
                    { x: 150, y: ALTO - 100, ancho: 100, alto: 10 },
                    { x: 400, y: ALTO - 180, ancho: 150, alto: 10 }
                ],
                anillos: [
                    { x: 200, y: ALTO - 120, tama침o: 8, recogido: false },
                    { x: 450, y: ALTO - 200, tama침o: 8, recogido: false }
                ],
                enemigos: [
                    { x: 600, y: ALTO - 40, ancho: 30, alto: 30, velocidad: 1, rangoXmin: 550, rangoXmax: 750, direccion: 1 }
                ]
            },
             // Nivel 2: Salto Largo
            {
                nombre: "Jump Challenge",
                plataformas: [
                    { x: 0, y: ALTO - 20, ancho: 200, alto: 20 },
                    { x: 600, y: ALTO - 20, ancho: 200, alto: 20 },
                    { x: 300, y: ALTO - 150, ancho: 50, alto: 10 }
                ],
                anillos: [
                    { x: 325, y: ALTO - 170, tama침o: 8, recogido: false }
                ],
                enemigos: []
            }
        ];

        let nivelActual = 0;
        let plataformas = [];
        let anillos = [];
        let enemigos = [];

        // Estado de las teclas
        let teclas = {
            izquierda: false,
            derecha: false,
            salto: false,
            turbo: false 
        };

        // ----------------------------------------------------
        // 2. L칍GICA DEL JUEGO (F칤sica Sonic-like)
        // ----------------------------------------------------

        function cargarNivel(index) {
            if (index >= niveles.length) {
                index = 0; // Bucle
            }
            nivelActual = index;
            
            // Cargar y CLONAR las estructuras del nivel
            plataformas = JSON.parse(JSON.stringify(niveles[nivelActual].plataformas));
            anillos = JSON.parse(JSON.stringify(niveles[nivelActual].anillos));
            enemigos = JSON.parse(JSON.stringify(niveles[nivelActual].enemigos));

            reiniciarPosicionJugador();
        }

        function verificarColision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.ancho &&
                   rect1.x + rect1.ancho > rect2.x &&
                   rect1.y < rect2.y + rect2.alto &&
                   rect1.y + rect1.alto > rect2.y;
        }

        function actualizar() {
            if (estadoJuego !== 'JUGANDO') return;
            
            let maxSpeed = BASE_MAX_SPEED * (teclas.turbo ? TURBO_FACTOR : 1);
            let acceleration = BASE_ACCELERATION;

            // 1. Aplicar Gravedad
            if (!jugador.enElSuelo) { 
                jugador.dy += GRAVEDAD; 
            }

            // 2. Movimiento Horizontal (Aceleraci칩n / Fricci칩n / Air Drag)
            if (teclas.izquierda) {
                jugador.dx -= acceleration;
                jugador.mirandoDerecha = false;
            } else if (teclas.derecha) {
                jugador.dx += acceleration;
                jugador.mirandoDerecha = true;
            } 
            
            // Aplicar fricci칩n/momentum
            if (jugador.enElSuelo) {
                if (!teclas.izquierda && !teclas.derecha) {
                    jugador.dx *= FRICTION; 
                }
            } else {
                jugador.dx *= AIR_DRAG; // Menor arrastre a칠reo (m치s control de momentum en el aire)
            }


            // Limitar velocidad (cap)
            jugador.dx = Math.max(-maxSpeed, Math.min(maxSpeed, jugador.dx));
            
            // Detener por completo si la velocidad es muy baja
            if (jugador.enElSuelo && Math.abs(jugador.dx) < 0.1) {
                jugador.dx = 0;
            }

            // 3. Salto
            if (teclas.salto && jugador.enElSuelo) {
                jugador.dy = VELOCIDAD_SALTO;
                jugador.enElSuelo = false;
                teclas.salto = false;
            }

            // 4. Actualizar Posici칩n
            jugador.x += jugador.dx;
            jugador.y += jugador.dy;
            
            jugador.enElSuelo = false;

            // 5. Colisiones con Plataformas (vertical primero)
            plataformas.forEach(plataforma => {
                if (verificarColision(jugador, plataforma)) {
                    // Solo aterrizaje/cabeza (Simplificaci칩n)
                    if (jugador.dy > 0 && jugador.y + jugador.alto < plataforma.y + plataforma.alto) { 
                        jugador.y = plataforma.y - jugador.alto; 
                        jugador.dy = 0; 
                        jugador.enElSuelo = true;
                    }
                    else if (jugador.dy < 0 && jugador.y > plataforma.y) { 
                        jugador.y = plataforma.y + plataforma.alto;
                        jugador.dy = 0; 
                    }
                }
            });

            // 6. Colisiones con Anillos
            anillos.forEach(anillo => {
                if (!anillo.recogido && 
                    jugador.x < anillo.x + anillo.tama침o &&
                    jugador.x + jugador.ancho > anillo.x &&
                    jugador.y < anillo.y + anillo.tama침o &&
                    jugador.y + jugador.alto > anillo.y) {
                    
                    anillo.recogido = true;
                    puntuacion += 10;
                }
            });

            // 7. L칩gica y Colisiones con Enemigos
            enemigos.forEach(enemigo => {
                // Movimiento simple del enemigo
                if (enemigo.x >= enemigo.rangoXmax) enemigo.direccion = -1;
                if (enemigo.x <= enemigo.rangoXmin) enemigo.direccion = 1;
                enemigo.x += enemigo.direccion * enemigo.velocidad;

                // Colisi칩n con el jugador
                if (verificarColision(jugador, enemigo)) {
                    // Colisi칩n por arriba (ataque): dar rebote y "eliminar" enemigo
                    if (jugador.dy > 0 && jugador.y + jugador.alto < enemigo.y + 10 && jugador.enElSuelo === false) { 
                        enemigo.x = -1000; // Mover fuera de la pantalla (eliminarlo)
                        jugador.dy = VELOCIDAD_SALTO / 2; // Peque침o rebote
                        puntuacion += 50;
                    } else {
                        // Colisi칩n lateral o por debajo (da침o): Reiniciar posici칩n
                        reiniciarPosicionJugador();
                        puntuacion = Math.max(0, puntuacion - 10); // Penalizaci칩n simple
                    }
                }
            });

            // 8. L칈MITES Y WRAP-AROUND (NUEVO COMPORTAMIENTO)
            
            // 游깴 Wrap-Around Horizontal (Atraviesa el mundo)
            if (jugador.x > ANCHO) {
                // Si el jugador se va por la derecha, reaparece por la izquierda
                jugador.x = 0 - jugador.ancho; 
                // Al pasar de nivel, reiniciar las plataformas (opcional, si el mundo fuera el l칤mite)
                // siguienteNivel(); 
            } else if (jugador.x + jugador.ancho < 0) {
                 // Si el jugador se va por la izquierda, reaparece por la derecha
                jugador.x = ANCHO;
            }

            // 拘勇 Ca칤da al Vac칤o (Reinicia)
            if (jugador.y > ALTO + 50) { // +50 da un margen para caer antes de reiniciar
                // Se ha ca칤do del mundo: Reiniciar nivel actual
                reiniciarPosicionJugador();
                puntuacion = Math.max(0, puntuacion - 50); // Penalizaci칩n por caer
            }
            
            // 拘勇 L칤mite Superior
            if (jugador.y < 0) {
                jugador.y = 0;
                if (jugador.dy < 0) jugador.dy = 0;
            }
            
            // 9. Animaci칩n Sprite
            actualizarAnimacion();
        }
        
        function reiniciarPosicionJugador() {
            jugador.x = 50;
            jugador.y = ALTO - TILE_SIZE;
            jugador.dy = 0;
            jugador.dx = 0;
            jugador.enElSuelo = false;
        }
        
        function siguienteNivel() {
            cargarNivel(nivelActual + 1);
            selectorNivel.value = nivelActual;
        }

        // ----------------------------------------------------
        // 3. ANIMACI칍N Y DIBUJO (Sprites)
        // ----------------------------------------------------
        
        function actualizarAnimacion() {
            frameDelay++;
            
            let frameRate = 10; 
            if (Math.abs(jugador.dx) > 0.1) {
                frameRate = Math.max(2, 10 - Math.floor(Math.abs(jugador.dx) * 1.5)); 
            }
            
            if (jugador.enElSuelo && Math.abs(jugador.dx) > 0.1 && frameDelay >= frameRate) {
                currentFrame = (currentFrame + 1) % FRAMES_PER_ANIMATION; 
                frameDelay = 0;
            } else if (!jugador.enElSuelo) {
                currentFrame = FRAME_SALTO;
            } else if (jugador.enElSuelo && Math.abs(jugador.dx) <= 0.1) {
                currentFrame = 0;
            }
        }


        function dibujar() {
            // 1. Dibujar Fondo
            ctx.fillStyle = colorFondo;
            ctx.fillRect(0, 0, ANCHO, ALTO);
            
            // 2. Dibujar Plataformas (Tierra)
            ctx.fillStyle = '#1e7b30'; 
            plataformas.forEach(plataforma => {
                ctx.fillRect(plataforma.x, plataforma.y, plataforma.ancho, plataforma.alto);
            });
            
            // 3. Dibujar Anillos
            ctx.fillStyle = 'yellow';
            anillos.forEach(anillo => {
                if (!anillo.recogido) {
                    ctx.beginPath();
                    ctx.fillRect(anillo.x, anillo.y, anillo.tama침o * 2, anillo.tama침o * 2); 
                }
            });

            // 4. Dibujar Enemigos
            ctx.fillStyle = 'red';
            enemigos.forEach(enemigo => {
                if (enemigo.x > 0) {
                    ctx.fillRect(enemigo.x, enemigo.y, enemigo.ancho, enemigo.alto);
                }
            });


            // 5. Dibujar Jugador (Usando sprites o fallback)
            ctx.save();
            ctx.translate(jugador.x + jugador.ancho / 2, jugador.y + jugador.alto / 2); 

            if (!jugador.mirandoDerecha) {
                ctx.scale(-1, 1); 
            }
            
            // Dibujar el sprite
            if (spriteLoaded) {
                 ctx.drawImage(
                    playerSprite, 
                    currentFrame * FRAME_WIDTH, 
                    0, 
                    FRAME_WIDTH, 
                    FRAME_HEIGHT, 
                    -jugador.ancho / 2, 
                    -jugador.alto / 2, 
                    jugador.ancho, 
                    jugador.alto
                );
            } else {
                // Fallback: Dibujar un cuadrado simple si la imagen no carga
                ctx.fillStyle = colorJugador; 
                ctx.fillRect(-jugador.ancho / 2, -jugador.alto / 2, jugador.ancho, jugador.alto);
            }
            ctx.restore(); 
            
            // 6. Dibujar HUD (Puntuaci칩n y Nivel)
            ctx.fillStyle = 'white';
            ctx.font = '16px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(`Nivel: ${nivelActual} (${niveles[nivelActual].nombre})`, 10, 20);
            ctx.fillText(`Anillos: ${puntuacion}`, 10, 40);
            ctx.fillText(`Velocidad X: ${jugador.dx.toFixed(2)}`, 10, 60); // Debug: ver velocidad

            // 7. Dibujar Men칰s
            if (estadoJuego === 'INICIO') {
                dibujarMenuInicio();
                controlesDiv.style.display = 'none'; 
            } else if (estadoJuego === 'PAUSA') {
                dibujarMenuPausa();
                controlesDiv.style.display = 'flex';
            } else {
                controlesDiv.style.display = 'none';
            }
        }
        
        function dibujarMenuInicio() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, ANCHO, ALTO);

            ctx.fillStyle = 'white';
            ctx.font = '48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Tinylol Java - R치pido!', ANCHO / 2, ALTO / 3);
            
            ctx.font = '24px Arial';
            ctx.fillText('Presiona ESPACIO o ENTER para empezar', ANCHO / 2, ALTO / 2);
            
            ctx.font = '16px Arial';
            ctx.fillText('Controles: A/D para mover, ESPACIO para saltar, SHIFT para turbo', ANCHO / 2, ALTO / 2 + 40);
             ctx.fillText('Presiona P para Personalizar/Editor', ANCHO / 2, ALTO / 2 + 70);
             ctx.fillText('춰El mundo se repite horizontalmente!', ANCHO / 2, ALTO / 2 + 100);
        }

        function dibujarMenuPausa() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            ctx.fillRect(0, 0, ANCHO, ALTO);

            ctx.fillStyle = 'white';
            ctx.font = '48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('PAUSA / EDITOR', ANCHO / 2, ALTO / 2);
            
            ctx.font = '24px Arial';
            ctx.fillText('Modifica la f칤sica, colores y nivel.', ANCHO / 2, ALTO / 2 + 50);
        }

        // ----------------------------------------------------
        // 4. EVENTOS (Teclado y Controles)
        // ----------------------------------------------------
        
        document.addEventListener('keydown', (e) => {
            if (estadoJuego === 'JUGANDO' || estadoJuego === 'PAUSA') {
                switch (e.code) {
                    case 'ArrowLeft': case 'KeyA': teclas.izquierda = true; break;
                    case 'ArrowRight': case 'KeyD': teclas.derecha = true; break;
                    case 'Space': case 'ArrowUp': case 'KeyW': 
                        if (estadoJuego === 'JUGANDO') { teclas.salto = true; }
                        break;
                    case 'ShiftLeft': case 'ShiftRight': 
                        teclas.turbo = true;
                        break;
                    case 'KeyP': 
                        if (estadoJuego === 'JUGANDO') { estadoJuego = 'PAUSA'; modoEditor = null; actualizarEstiloBotones(); } 
                        else if (estadoJuego === 'PAUSA') { estadoJuego = 'JUGANDO'; modoEditor = null; actualizarEstiloBotones(); }
                        break;
                }
            } else if (estadoJuego === 'INICIO') {
                if (e.code === 'Space' || e.code === 'Enter') {
                    estadoJuego = 'JUGANDO';
                }
            }
        });

        document.addEventListener('keyup', (e) => {
            switch (e.code) {
                case 'ArrowLeft': case 'KeyA': teclas.izquierda = false; break;
                case 'ArrowRight': case 'KeyD': teclas.derecha = false; break;
                case 'ShiftLeft': case 'ShiftRight': 
                    teclas.turbo = false;
                    break;
            }
        });

        // Eventos de Personalizaci칩n y Editor
        inputColorFondo.addEventListener('input', (e) => { colorFondo = e.target.value; });
        inputColorJugador.addEventListener('input', (e) => { colorJugador = e.target.value; });
        inputMaxVelocidad.addEventListener('change', (e) => { BASE_MAX_SPEED = parseFloat(e.target.value); });
        inputAceleracion.addEventListener('change', (e) => { BASE_ACCELERATION = parseFloat(e.target.value); });
        inputFriccion.addEventListener('change', (e) => { FRICTION = parseFloat(e.target.value); }); 
        
        btnVolver.addEventListener('click', () => {
             if (estadoJuego === 'PAUSA' || estadoJuego === 'INICIO') {
                estadoJuego = 'JUGANDO';
                modoEditor = null;
                actualizarEstiloBotones();
            }
        });
        
        selectorNivel.addEventListener('change', (e) => {
            cargarNivel(parseInt(e.target.value));
        });

        function actualizarEstiloBotones() {
            btnAddPlatform.classList.remove('editor-activo');
            btnRemovePlatform.classList.remove('editor-activo');
            if (modoEditor === 'ADD') {
                btnAddPlatform.classList.add('editor-activo');
            } else if (modoEditor === 'REMOVE') {
                btnRemovePlatform.classList.add('editor-activo');
            }
        }

        btnAddPlatform.addEventListener('click', () => {
            modoEditor = (modoEditor === 'ADD') ? null : 'ADD';
            actualizarEstiloBotones();
        });

        btnRemovePlatform.addEventListener('click', () => {
            modoEditor = (modoEditor === 'REMOVE') ? null : 'REMOVE';
            actualizarEstiloBotones();
        });

        canvas.addEventListener('click', (e) => {
            if (estadoJuego !== 'PAUSA' || modoEditor === null) return;
            
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            const plataformasNivel = niveles[nivelActual].plataformas;

            if (modoEditor === 'ADD') {
                const nuevaPlataforma = {
                    x: mouseX - 50, 
                    y: mouseY - 5,  
                    ancho: 100,
                    alto: 10
                };
                plataformasNivel.push(nuevaPlataforma);
                plataformas = plataformasNivel; 

            } else if (modoEditor === 'REMOVE') {
                for (let i = plataformasNivel.length - 1; i >= 1; i--) {
                    const p = plataformasNivel[i];
                    if (mouseX >= p.x && mouseX <= p.x + p.ancho &&
                        mouseY >= p.y && mouseY <= p.y + p.alto) {
                        plataformasNivel.splice(i, 1);
                        plataformas = plataformasNivel; 
                        break; 
                    }
                }
            }
        });

        // Funci칩n de inicializaci칩n para cargar el men칰 de nivel
        function inicializarJuego() {
             niveles.forEach((nivel, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `Nivel ${index}: ${nivel.nombre}`;
                selectorNivel.appendChild(option);
            });
            cargarNivel(0); 
        }

        // ----------------------------------------------------
        // 5. BUCLE PRINCIPAL
        // ----------------------------------------------------
        
        function loopJuego() {
            actualizar();
            dibujar();
            requestAnimationFrame(loopJuego);
        }

        inicializarJuego();
        loopJuego();

    </script>
</body>
</html>